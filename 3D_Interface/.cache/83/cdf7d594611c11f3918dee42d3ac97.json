{"id":"OCdk","dependencies":[{"name":"/home/heshds/Academics/semester5/PROJECT/e16-3yp-obstacle-bots-for-swarm-robots/3D_Interface/package.json","includedInParent":true,"mtime":1605341821038},{"name":"paho-mqtt","loc":{"line":1,"column":17},"parent":"/home/heshds/Academics/semester5/PROJECT/e16-3yp-obstacle-bots-for-swarm-robots/3D_Interface/mqttClient.js","resolved":"/home/heshds/Academics/semester5/PROJECT/e16-3yp-obstacle-bots-for-swarm-robots/3D_Interface/node_modules/paho-mqtt/paho-mqtt.js"},{"name":"./protobuf/MQTT_msg_pb.js","loc":{"line":14,"column":23},"parent":"/home/heshds/Academics/semester5/PROJECT/e16-3yp-obstacle-bots-for-swarm-robots/3D_Interface/mqttClient.js","resolved":"/home/heshds/Academics/semester5/PROJECT/e16-3yp-obstacle-bots-for-swarm-robots/3D_Interface/protobuf/MQTT_msg_pb.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.mqttClient=g,exports.onConnect=m,exports.onFailure=b,exports.onMessageArrived=f,exports.connenctToServer=_,exports.onConnectionLost=w,exports.publish=M,exports.setNewDataState=q,exports.serverData=exports.serverList=exports.newData=exports.mqtt_data=void 0;var e=o(require(\"paho-mqtt\"));function o(e){return e&&e.__esModule?e:{default:e}}var t,s,r,n,a=\"\",i=\"\",c=\"swarm/common\",p=\"broker.mqttdashboard.com\",l=8e3,u=require(\"./protobuf/MQTT_msg_pb.js\"),d=new u.BotPositionArr,v=!1,x=[];function g(){return s=\"client_\"+Math.random().toString(36).substring(2,15),(t=new e.default.Client(p,l,s)).connect({reconnect:!0,onSuccess:m,onFailure:b}),t}function m(){console.log(\"MQTT: connected\"),t.onMessageArrived=f,t.onConnectionLost=w,t.subscribe(c),M(c,s+\";get_servers\")}function b(){console.log(\"MQTT: connection failed\")}function f(e){if(e.topic==a){var o=u.BotPositionArr.deserializeBinary(e.payloadBytes);exports.mqtt_data=r=o.getPositionsList(),exports.newData=v=!0}else{var t=e.payloadString.split(\";\");\"server_name_response\"==t[0]&&(x.push(t[1]),console.log(\"Server name recieved; \"+t[2]),_(0)),e.topic==i&&\"server_response\"==t[0]&&(\"success\"==t[1]?(console.log(\"server connecion success\",t[2]),exports.serverData=n=JSON.parse(t[2])):console.log(\"server connecion refused\"))}}function _(e){0!=x.length&&(a=\"swarm/\"+x[e]+\"/bot_pos\",i=\"swarm/\"+x[e]+\"/com\",t.subscribe(a),t.subscribe(i),console.log(\"subscribed to server: \"+x[e]),M(i,s+\";connection_req\"))}function w(e){console.log(e.errorMessage)}function M(o,s){var r=new e.default.Message(s);r.destinationName=o,t.send(r),console.log(\"MQTT: published\")}function q(e){exports.newData=v=!1}exports.serverData=n,exports.serverList=x,exports.newData=v,exports.mqtt_data=r;"},"sourceMaps":{"js":{"mappings":[{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":0}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":13}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":20}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":35}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":43}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":56}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":57}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":64}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":68}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":76}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":87}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":89}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":97}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":107}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":109}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":117}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":127}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":129}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":137}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":154}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":156}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":164}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":181}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":183}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":191}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":208}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":210}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":218}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":226}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":228}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":236}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":252}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":254}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":262}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":273}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":281}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":292}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":300}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":308}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":316}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":331}},{"source":"mqttClient.js","original":{"line":1,"column":0},"generated":{"line":1,"column":333}},{"source":"mqttClient.js","original":{"line":1,"column":0},"generated":{"line":1,"column":337}},{"source":"mqttClient.js","original":{"line":1,"column":0},"generated":{"line":1,"column":339}},{"source":"mqttClient.js","original":{"line":1,"column":0},"generated":{"line":1,"column":341}},{"source":"mqttClient.js","original":{"line":1,"column":0},"generated":{"line":1,"column":349}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":363}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":372}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":374}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":377}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":384}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":387}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":389}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":400}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":402}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":403}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":411}},{"source":"mqttClient.js","original":{"line":5,"column":0},"generated":{"line":1,"column":414}},{"source":"mqttClient.js","name":"mqtt_client","original":{"line":11,"column":4},"generated":{"line":1,"column":418}},{"source":"mqttClient.js","name":"client_id","original":{"line":12,"column":4},"generated":{"line":1,"column":420}},{"source":"mqttClient.js","name":"mqtt_data","original":{"line":17,"column":11},"generated":{"line":1,"column":422}},{"source":"mqttClient.js","name":"serverData","original":{"line":17,"column":56},"generated":{"line":1,"column":424}},{"source":"mqttClient.js","name":"TOPIC_SEVER_BOT_POS","original":{"line":5,"column":4},"generated":{"line":1,"column":426}},{"source":"mqttClient.js","original":{"line":5,"column":26},"generated":{"line":1,"column":428}},{"source":"mqttClient.js","name":"TOPIC_SEVER_COM","original":{"line":6,"column":4},"generated":{"line":1,"column":431}},{"source":"mqttClient.js","original":{"line":6,"column":22},"generated":{"line":1,"column":433}},{"source":"mqttClient.js","name":"TOPIC_COM","original":{"line":7,"column":6},"generated":{"line":1,"column":436}},{"source":"mqttClient.js","original":{"line":7,"column":18},"generated":{"line":1,"column":438}},{"source":"mqttClient.js","name":"mqtt_server","original":{"line":9,"column":6},"generated":{"line":1,"column":453}},{"source":"mqttClient.js","original":{"line":9,"column":20},"generated":{"line":1,"column":455}},{"source":"mqttClient.js","name":"mqtt_port","original":{"line":10,"column":6},"generated":{"line":1,"column":482}},{"source":"mqttClient.js","original":{"line":10,"column":18},"generated":{"line":1,"column":484}},{"source":"mqttClient.js","name":"messages","original":{"line":14,"column":4},"generated":{"line":1,"column":488}},{"source":"mqttClient.js","name":"require","original":{"line":14,"column":15},"generated":{"line":1,"column":490}},{"source":"mqttClient.js","original":{"line":14,"column":23},"generated":{"line":1,"column":498}},{"source":"mqttClient.js","name":"message","original":{"line":15,"column":4},"generated":{"line":1,"column":527}},{"source":"mqttClient.js","original":{"line":15,"column":14},"generated":{"line":1,"column":529}},{"source":"mqttClient.js","name":"messages","original":{"line":15,"column":18},"generated":{"line":1,"column":533}},{"source":"mqttClient.js","name":"BotPositionArr","original":{"line":15,"column":27},"generated":{"line":1,"column":535}},{"source":"mqttClient.js","name":"newData","original":{"line":17,"column":22},"generated":{"line":1,"column":550}},{"source":"mqttClient.js","original":{"line":17,"column":32},"generated":{"line":1,"column":553}},{"source":"mqttClient.js","name":"serverList","original":{"line":17,"column":39},"generated":{"line":1,"column":555}},{"source":"mqttClient.js","original":{"line":17,"column":52},"generated":{"line":1,"column":557}},{"source":"mqttClient.js","original":{"line":19,"column":7},"generated":{"line":1,"column":560}},{"source":"mqttClient.js","name":"mqttClient","original":{"line":19,"column":16},"generated":{"line":1,"column":569}},{"source":"mqttClient.js","name":"mqtt_client","original":{"line":26,"column":11},"generated":{"line":1,"column":573}},{"source":"mqttClient.js","name":"client_id","original":{"line":22,"column":4},"generated":{"line":1,"column":580}},{"source":"mqttClient.js","original":{"line":22,"column":16},"generated":{"line":1,"column":582}},{"source":"mqttClient.js","name":"Math","original":{"line":22,"column":28},"generated":{"line":1,"column":592}},{"source":"mqttClient.js","name":"random","original":{"line":22,"column":33},"generated":{"line":1,"column":597}},{"source":"mqttClient.js","name":"toString","original":{"line":22,"column":42},"generated":{"line":1,"column":606}},{"source":"mqttClient.js","original":{"line":22,"column":51},"generated":{"line":1,"column":615}},{"source":"mqttClient.js","name":"substring","original":{"line":22,"column":55},"generated":{"line":1,"column":619}},{"source":"mqttClient.js","original":{"line":22,"column":65},"generated":{"line":1,"column":629}},{"source":"mqttClient.js","original":{"line":22,"column":68},"generated":{"line":1,"column":631}},{"source":"mqttClient.js","name":"mqtt_client","original":{"line":24,"column":4},"generated":{"line":1,"column":636}},{"source":"mqttClient.js","original":{"line":24,"column":18},"generated":{"line":1,"column":638}},{"source":"mqttClient.js","name":"MQTT","original":{"line":24,"column":22},"generated":{"line":1,"column":642}},{"source":"mqttClient.js","name":"Client","original":{"line":24,"column":27},"generated":{"line":1,"column":644}},{"source":"mqttClient.js","name":"Client","original":{"line":24,"column":27},"generated":{"line":1,"column":652}},{"source":"mqttClient.js","name":"mqtt_server","original":{"line":24,"column":34},"generated":{"line":1,"column":659}},{"source":"mqttClient.js","name":"mqtt_port","original":{"line":24,"column":47},"generated":{"line":1,"column":661}},{"source":"mqttClient.js","name":"client_id","original":{"line":24,"column":58},"generated":{"line":1,"column":663}},{"source":"mqttClient.js","name":"connect","original":{"line":25,"column":16},"generated":{"line":1,"column":667}},{"source":"mqttClient.js","original":{"line":25,"column":24},"generated":{"line":1,"column":675}},{"source":"mqttClient.js","name":"reconnect","original":{"line":25,"column":26},"generated":{"line":1,"column":676}},{"source":"mqttClient.js","original":{"line":25,"column":37},"generated":{"line":1,"column":687}},{"source":"mqttClient.js","name":"onSuccess","original":{"line":25,"column":43},"generated":{"line":1,"column":689}},{"source":"mqttClient.js","name":"onConnect","original":{"line":25,"column":54},"generated":{"line":1,"column":699}},{"source":"mqttClient.js","name":"onFailure","original":{"line":25,"column":65},"generated":{"line":1,"column":701}},{"source":"mqttClient.js","name":"onFailure","original":{"line":25,"column":76},"generated":{"line":1,"column":711}},{"source":"mqttClient.js","name":"mqtt_client","original":{"line":26,"column":11},"generated":{"line":1,"column":715}},{"source":"mqttClient.js","original":{"line":30,"column":7},"generated":{"line":1,"column":717}},{"source":"mqttClient.js","name":"onConnect","original":{"line":30,"column":16},"generated":{"line":1,"column":726}},{"source":"mqttClient.js","name":"console","original":{"line":32,"column":4},"generated":{"line":1,"column":730}},{"source":"mqttClient.js","name":"log","original":{"line":32,"column":12},"generated":{"line":1,"column":738}},{"source":"mqttClient.js","original":{"line":32,"column":16},"generated":{"line":1,"column":742}},{"source":"mqttClient.js","name":"mqtt_client","original":{"line":34,"column":4},"generated":{"line":1,"column":761}},{"source":"mqttClient.js","name":"onMessageArrived","original":{"line":34,"column":16},"generated":{"line":1,"column":763}},{"source":"mqttClient.js","name":"onMessageArrived","original":{"line":34,"column":35},"generated":{"line":1,"column":780}},{"source":"mqttClient.js","name":"mqtt_client","original":{"line":35,"column":4},"generated":{"line":1,"column":782}},{"source":"mqttClient.js","name":"onConnectionLost","original":{"line":35,"column":16},"generated":{"line":1,"column":784}},{"source":"mqttClient.js","name":"onConnectionLost","original":{"line":35,"column":35},"generated":{"line":1,"column":801}},{"source":"mqttClient.js","name":"mqtt_client","original":{"line":38,"column":4},"generated":{"line":1,"column":803}},{"source":"mqttClient.js","name":"subscribe","original":{"line":38,"column":16},"generated":{"line":1,"column":805}},{"source":"mqttClient.js","name":"TOPIC_COM","original":{"line":38,"column":26},"generated":{"line":1,"column":815}},{"source":"mqttClient.js","name":"publish","original":{"line":40,"column":4},"generated":{"line":1,"column":818}},{"source":"mqttClient.js","name":"TOPIC_COM","original":{"line":40,"column":12},"generated":{"line":1,"column":820}},{"source":"mqttClient.js","name":"client_id","original":{"line":40,"column":23},"generated":{"line":1,"column":822}},{"source":"mqttClient.js","original":{"line":40,"column":35},"generated":{"line":1,"column":824}},{"source":"mqttClient.js","original":{"line":43,"column":7},"generated":{"line":1,"column":840}},{"source":"mqttClient.js","name":"onFailure","original":{"line":43,"column":16},"generated":{"line":1,"column":849}},{"source":"mqttClient.js","name":"console","original":{"line":44,"column":4},"generated":{"line":1,"column":853}},{"source":"mqttClient.js","name":"log","original":{"line":44,"column":12},"generated":{"line":1,"column":861}},{"source":"mqttClient.js","original":{"line":44,"column":16},"generated":{"line":1,"column":865}},{"source":"mqttClient.js","original":{"line":47,"column":7},"generated":{"line":1,"column":892}},{"source":"mqttClient.js","name":"onMessageArrived","original":{"line":47,"column":16},"generated":{"line":1,"column":901}},{"source":"mqttClient.js","name":"message_","original":{"line":47,"column":33},"generated":{"line":1,"column":903}},{"source":"mqttClient.js","name":"message_","original":{"line":49,"column":8},"generated":{"line":1,"column":906}},{"source":"mqttClient.js","name":"message_","original":{"line":49,"column":8},"generated":{"line":1,"column":909}},{"source":"mqttClient.js","name":"topic","original":{"line":49,"column":17},"generated":{"line":1,"column":911}},{"source":"mqttClient.js","name":"TOPIC_SEVER_BOT_POS","original":{"line":49,"column":26},"generated":{"line":1,"column":918}},{"source":"mqttClient.js","original":{"line":49,"column":47},"generated":{"line":1,"column":920}},{"source":"mqttClient.js","name":"s","original":{"line":50,"column":12},"generated":{"line":1,"column":921}},{"source":"mqttClient.js","name":"s","original":{"line":50,"column":12},"generated":{"line":1,"column":925}},{"source":"mqttClient.js","name":"messages","original":{"line":50,"column":16},"generated":{"line":1,"column":927}},{"source":"mqttClient.js","name":"BotPositionArr","original":{"line":50,"column":25},"generated":{"line":1,"column":929}},{"source":"mqttClient.js","name":"deserializeBinary","original":{"line":50,"column":40},"generated":{"line":1,"column":944}},{"source":"mqttClient.js","name":"message_","original":{"line":50,"column":58},"generated":{"line":1,"column":962}},{"source":"mqttClient.js","name":"payloadBytes","original":{"line":50,"column":67},"generated":{"line":1,"column":964}},{"source":"mqttClient.js","name":"mqtt_data","original":{"line":51,"column":8},"generated":{"line":1,"column":978}},{"source":"mqttClient.js","name":"mqtt_data","original":{"line":51,"column":8},"generated":{"line":1,"column":986}},{"source":"mqttClient.js","name":"mqtt_data","original":{"line":51,"column":8},"generated":{"line":1,"column":996}},{"source":"mqttClient.js","name":"s","original":{"line":51,"column":20},"generated":{"line":1,"column":998}},{"source":"mqttClient.js","name":"getPositionsList","original":{"line":51,"column":22},"generated":{"line":1,"column":1000}},{"source":"mqttClient.js","name":"newData","original":{"line":52,"column":8},"generated":{"line":1,"column":1019}},{"source":"mqttClient.js","name":"newData","original":{"line":52,"column":8},"generated":{"line":1,"column":1027}},{"source":"mqttClient.js","name":"newData","original":{"line":52,"column":8},"generated":{"line":1,"column":1035}},{"source":"mqttClient.js","original":{"line":52,"column":18},"generated":{"line":1,"column":1038}},{"source":"mqttClient.js","original":{"line":53,"column":11},"generated":{"line":1,"column":1044}},{"source":"mqttClient.js","name":"messageString","original":{"line":54,"column":12},"generated":{"line":1,"column":1045}},{"source":"mqttClient.js","name":"messageString","original":{"line":54,"column":12},"generated":{"line":1,"column":1049}},{"source":"mqttClient.js","name":"message_","original":{"line":54,"column":28},"generated":{"line":1,"column":1051}},{"source":"mqttClient.js","name":"payloadString","original":{"line":54,"column":37},"generated":{"line":1,"column":1053}},{"source":"mqttClient.js","name":"split","original":{"line":54,"column":51},"generated":{"line":1,"column":1067}},{"source":"mqttClient.js","original":{"line":54,"column":57},"generated":{"line":1,"column":1073}},{"source":"mqttClient.js","original":{"line":55,"column":32},"generated":{"line":1,"column":1078}},{"source":"mqttClient.js","name":"messageString","original":{"line":55,"column":12},"generated":{"line":1,"column":1102}},{"source":"mqttClient.js","original":{"line":55,"column":26},"generated":{"line":1,"column":1104}},{"source":"mqttClient.js","name":"serverList","original":{"line":56,"column":12},"generated":{"line":1,"column":1109}},{"source":"mqttClient.js","name":"push","original":{"line":56,"column":23},"generated":{"line":1,"column":1111}},{"source":"mqttClient.js","name":"messageString","original":{"line":56,"column":28},"generated":{"line":1,"column":1116}},{"source":"mqttClient.js","original":{"line":56,"column":42},"generated":{"line":1,"column":1118}},{"source":"mqttClient.js","name":"console","original":{"line":57,"column":12},"generated":{"line":1,"column":1122}},{"source":"mqttClient.js","name":"log","original":{"line":57,"column":20},"generated":{"line":1,"column":1130}},{"source":"mqttClient.js","original":{"line":57,"column":24},"generated":{"line":1,"column":1134}},{"source":"mqttClient.js","name":"messageString","original":{"line":57,"column":51},"generated":{"line":1,"column":1159}},{"source":"mqttClient.js","original":{"line":57,"column":65},"generated":{"line":1,"column":1161}},{"source":"mqttClient.js","name":"connenctToServer","original":{"line":59,"column":12},"generated":{"line":1,"column":1165}},{"source":"mqttClient.js","original":{"line":59,"column":29},"generated":{"line":1,"column":1167}},{"source":"mqttClient.js","name":"message_","original":{"line":61,"column":12},"generated":{"line":1,"column":1171}},{"source":"mqttClient.js","name":"topic","original":{"line":61,"column":21},"generated":{"line":1,"column":1173}},{"source":"mqttClient.js","name":"TOPIC_SEVER_COM","original":{"line":61,"column":30},"generated":{"line":1,"column":1180}},{"source":"mqttClient.js","original":{"line":62,"column":36},"generated":{"line":1,"column":1183}},{"source":"mqttClient.js","name":"messageString","original":{"line":62,"column":16},"generated":{"line":1,"column":1202}},{"source":"mqttClient.js","original":{"line":62,"column":30},"generated":{"line":1,"column":1204}},{"source":"mqttClient.js","original":{"line":63,"column":40},"generated":{"line":1,"column":1209}},{"source":"mqttClient.js","name":"messageString","original":{"line":63,"column":20},"generated":{"line":1,"column":1220}},{"source":"mqttClient.js","original":{"line":63,"column":34},"generated":{"line":1,"column":1222}},{"source":"mqttClient.js","name":"console","original":{"line":64,"column":20},"generated":{"line":1,"column":1226}},{"source":"mqttClient.js","name":"log","original":{"line":64,"column":28},"generated":{"line":1,"column":1234}},{"source":"mqttClient.js","original":{"line":64,"column":32},"generated":{"line":1,"column":1238}},{"source":"mqttClient.js","name":"messageString","original":{"line":64,"column":60},"generated":{"line":1,"column":1265}},{"source":"mqttClient.js","original":{"line":64,"column":74},"generated":{"line":1,"column":1267}},{"source":"mqttClient.js","name":"serverData","original":{"line":65,"column":20},"generated":{"line":1,"column":1271}},{"source":"mqttClient.js","name":"serverData","original":{"line":65,"column":20},"generated":{"line":1,"column":1279}},{"source":"mqttClient.js","name":"serverData","original":{"line":65,"column":20},"generated":{"line":1,"column":1290}},{"source":"mqttClient.js","name":"JSON","original":{"line":65,"column":33},"generated":{"line":1,"column":1292}},{"source":"mqttClient.js","name":"parse","original":{"line":65,"column":38},"generated":{"line":1,"column":1297}},{"source":"mqttClient.js","name":"messageString","original":{"line":65,"column":44},"generated":{"line":1,"column":1303}},{"source":"mqttClient.js","original":{"line":65,"column":58},"generated":{"line":1,"column":1305}},{"source":"mqttClient.js","name":"console","original":{"line":67,"column":20},"generated":{"line":1,"column":1310}},{"source":"mqttClient.js","name":"log","original":{"line":67,"column":28},"generated":{"line":1,"column":1318}},{"source":"mqttClient.js","original":{"line":67,"column":32},"generated":{"line":1,"column":1322}},{"source":"mqttClient.js","original":{"line":77,"column":7},"generated":{"line":1,"column":1352}},{"source":"mqttClient.js","name":"connenctToServer","original":{"line":77,"column":16},"generated":{"line":1,"column":1361}},{"source":"mqttClient.js","name":"serverIdx","original":{"line":77,"column":33},"generated":{"line":1,"column":1363}},{"source":"mqttClient.js","original":{"line":78,"column":29},"generated":{"line":1,"column":1366}},{"source":"mqttClient.js","name":"serverList","original":{"line":78,"column":8},"generated":{"line":1,"column":1369}},{"source":"mqttClient.js","name":"length","original":{"line":78,"column":19},"generated":{"line":1,"column":1371}},{"source":"mqttClient.js","name":"TOPIC_SEVER_BOT_POS","original":{"line":80,"column":8},"generated":{"line":1,"column":1380}},{"source":"mqttClient.js","original":{"line":80,"column":30},"generated":{"line":1,"column":1382}},{"source":"mqttClient.js","name":"serverList","original":{"line":80,"column":41},"generated":{"line":1,"column":1391}},{"source":"mqttClient.js","name":"serverIdx","original":{"line":80,"column":52},"generated":{"line":1,"column":1393}},{"source":"mqttClient.js","original":{"line":80,"column":65},"generated":{"line":1,"column":1396}},{"source":"mqttClient.js","name":"TOPIC_SEVER_COM","original":{"line":81,"column":8},"generated":{"line":1,"column":1407}},{"source":"mqttClient.js","original":{"line":81,"column":26},"generated":{"line":1,"column":1409}},{"source":"mqttClient.js","name":"serverList","original":{"line":81,"column":37},"generated":{"line":1,"column":1418}},{"source":"mqttClient.js","name":"serverIdx","original":{"line":81,"column":48},"generated":{"line":1,"column":1420}},{"source":"mqttClient.js","original":{"line":81,"column":61},"generated":{"line":1,"column":1423}},{"source":"mqttClient.js","name":"mqtt_client","original":{"line":83,"column":8},"generated":{"line":1,"column":1430}},{"source":"mqttClient.js","name":"subscribe","original":{"line":83,"column":20},"generated":{"line":1,"column":1432}},{"source":"mqttClient.js","name":"TOPIC_SEVER_BOT_POS","original":{"line":83,"column":30},"generated":{"line":1,"column":1442}},{"source":"mqttClient.js","name":"mqtt_client","original":{"line":84,"column":8},"generated":{"line":1,"column":1445}},{"source":"mqttClient.js","name":"subscribe","original":{"line":84,"column":20},"generated":{"line":1,"column":1447}},{"source":"mqttClient.js","name":"TOPIC_SEVER_COM","original":{"line":84,"column":30},"generated":{"line":1,"column":1457}},{"source":"mqttClient.js","name":"console","original":{"line":86,"column":8},"generated":{"line":1,"column":1460}},{"source":"mqttClient.js","name":"log","original":{"line":86,"column":16},"generated":{"line":1,"column":1468}},{"source":"mqttClient.js","original":{"line":86,"column":20},"generated":{"line":1,"column":1472}},{"source":"mqttClient.js","name":"serverList","original":{"line":86,"column":47},"generated":{"line":1,"column":1497}},{"source":"mqttClient.js","name":"serverIdx","original":{"line":86,"column":58},"generated":{"line":1,"column":1499}},{"source":"mqttClient.js","name":"publish","original":{"line":87,"column":8},"generated":{"line":1,"column":1503}},{"source":"mqttClient.js","name":"TOPIC_SEVER_COM","original":{"line":87,"column":16},"generated":{"line":1,"column":1505}},{"source":"mqttClient.js","name":"client_id","original":{"line":87,"column":33},"generated":{"line":1,"column":1507}},{"source":"mqttClient.js","original":{"line":87,"column":45},"generated":{"line":1,"column":1509}},{"source":"mqttClient.js","original":{"line":92,"column":7},"generated":{"line":1,"column":1529}},{"source":"mqttClient.js","name":"onConnectionLost","original":{"line":92,"column":16},"generated":{"line":1,"column":1538}},{"source":"mqttClient.js","name":"response","original":{"line":92,"column":33},"generated":{"line":1,"column":1540}},{"source":"mqttClient.js","name":"console","original":{"line":93,"column":4},"generated":{"line":1,"column":1543}},{"source":"mqttClient.js","name":"log","original":{"line":93,"column":12},"generated":{"line":1,"column":1551}},{"source":"mqttClient.js","name":"response","original":{"line":93,"column":16},"generated":{"line":1,"column":1555}},{"source":"mqttClient.js","name":"errorMessage","original":{"line":93,"column":25},"generated":{"line":1,"column":1557}},{"source":"mqttClient.js","original":{"line":96,"column":7},"generated":{"line":1,"column":1571}},{"source":"mqttClient.js","name":"publish","original":{"line":96,"column":16},"generated":{"line":1,"column":1580}},{"source":"mqttClient.js","name":"topic","original":{"line":96,"column":24},"generated":{"line":1,"column":1582}},{"source":"mqttClient.js","name":"message","original":{"line":96,"column":31},"generated":{"line":1,"column":1584}},{"source":"mqttClient.js","name":"payload","original":{"line":97,"column":8},"generated":{"line":1,"column":1587}},{"source":"mqttClient.js","name":"payload","original":{"line":97,"column":8},"generated":{"line":1,"column":1591}},{"source":"mqttClient.js","original":{"line":97,"column":18},"generated":{"line":1,"column":1593}},{"source":"mqttClient.js","name":"MQTT","original":{"line":97,"column":22},"generated":{"line":1,"column":1597}},{"source":"mqttClient.js","name":"Message","original":{"line":97,"column":27},"generated":{"line":1,"column":1599}},{"source":"mqttClient.js","name":"Message","original":{"line":97,"column":27},"generated":{"line":1,"column":1607}},{"source":"mqttClient.js","name":"message","original":{"line":97,"column":35},"generated":{"line":1,"column":1615}},{"source":"mqttClient.js","name":"payload","original":{"line":98,"column":4},"generated":{"line":1,"column":1618}},{"source":"mqttClient.js","name":"destinationName","original":{"line":98,"column":12},"generated":{"line":1,"column":1620}},{"source":"mqttClient.js","name":"topic","original":{"line":98,"column":30},"generated":{"line":1,"column":1636}},{"source":"mqttClient.js","name":"mqtt_client","original":{"line":99,"column":4},"generated":{"line":1,"column":1638}},{"source":"mqttClient.js","name":"send","original":{"line":99,"column":16},"generated":{"line":1,"column":1640}},{"source":"mqttClient.js","name":"payload","original":{"line":99,"column":21},"generated":{"line":1,"column":1645}},{"source":"mqttClient.js","name":"console","original":{"line":100,"column":4},"generated":{"line":1,"column":1648}},{"source":"mqttClient.js","name":"log","original":{"line":100,"column":12},"generated":{"line":1,"column":1656}},{"source":"mqttClient.js","original":{"line":100,"column":16},"generated":{"line":1,"column":1660}},{"source":"mqttClient.js","original":{"line":102,"column":7},"generated":{"line":1,"column":1679}},{"source":"mqttClient.js","name":"setNewDataState","original":{"line":102,"column":16},"generated":{"line":1,"column":1688}},{"source":"mqttClient.js","name":"state","original":{"line":102,"column":32},"generated":{"line":1,"column":1690}},{"source":"mqttClient.js","name":"newData","original":{"line":103,"column":4},"generated":{"line":1,"column":1693}},{"source":"mqttClient.js","name":"newData","original":{"line":103,"column":4},"generated":{"line":1,"column":1701}},{"source":"mqttClient.js","name":"newData","original":{"line":103,"column":4},"generated":{"line":1,"column":1709}},{"source":"mqttClient.js","original":{"line":103,"column":14},"generated":{"line":1,"column":1712}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":1714}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":1722}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":1733}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":1735}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":1743}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":1754}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":1756}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":1764}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":1772}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":1774}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":1782}},{"source":"mqttClient.js","original":{"line":104,"column":1},"generated":{"line":1,"column":1792}}],"sources":{"mqttClient.js":"import MQTT from 'paho-mqtt';\n\n\n\nlet TOPIC_SEVER_BOT_POS = ''; // topic that server publishes bot positions - [unidirectional]\nlet TOPIC_SEVER_COM = '' //topic that server and a client communicate - [bidirectional]\nconst TOPIC_COM = 'swarm/common' // common data line for all the clients and servers - [bidirectional]\n\nconst mqtt_server = \"broker.mqttdashboard.com\";\nconst mqtt_port = 8000;\nlet mqtt_client;\nlet client_id;\n\nvar messages = require('./protobuf/MQTT_msg_pb.js');\nvar message = new messages.BotPositionArr()\n\nexport let mqtt_data, newData = false, serverList = [], serverData;\n\nexport function mqttClient() {\n\n    //generate a random id for the client\n    client_id = 'client_' + Math.random().toString(36).substring(2, 15); // create a random client Id\n    // connect to the broker\n    mqtt_client = new MQTT.Client(mqtt_server, mqtt_port, client_id);\n    mqtt_client.connect({ reconnect: true, onSuccess: onConnect, onFailure: onFailure });\n    return mqtt_client;\n\n}\n\nexport function onConnect() {\n\n    console.log('MQTT: connected');\n\n    mqtt_client.onMessageArrived = onMessageArrived;\n    mqtt_client.onConnectionLost = onConnectionLost;\n\n    // Subscribe to topics\n    mqtt_client.subscribe(TOPIC_COM);\n\n    publish(TOPIC_COM, client_id + \";get_servers\"); // request for platform pc names\n\n}\nexport function onFailure() {\n    console.log('MQTT: connection failed');\n}\n\nexport function onMessageArrived(message_) {\n\n    if (message_.topic == TOPIC_SEVER_BOT_POS) {\n        let s = messages.BotPositionArr.deserializeBinary(message_.payloadBytes);\n        mqtt_data = s.getPositionsList()\n        newData = true;\n    } else {\n        let messageString = message_.payloadString.split(';')\n        if (messageString[0] == \"server_name_response\") {\n            serverList.push(messageString[1])\n            console.log(\"Server name recieved; \" + messageString[2])\n\n            connenctToServer(0);\n        }\n        if (message_.topic == TOPIC_SEVER_COM) {\n            if (messageString[0] == \"server_response\") {\n                if (messageString[1] == \"success\") {\n                    console.log(\"server connecion success\", messageString[2])\n                    serverData = JSON.parse(messageString[2])\n                } else {\n                    console.log(\"server connecion refused\")\n                }\n            }\n        }\n    }\n\n\n}\n\n// this functions id used to connect to a specific server\nexport function connenctToServer(serverIdx) {\n    if (serverList.length != 0) {\n\n        TOPIC_SEVER_BOT_POS = 'swarm/' + serverList[serverIdx] + '/bot_pos'\n        TOPIC_SEVER_COM = 'swarm/' + serverList[serverIdx] + '/com'\n\n        mqtt_client.subscribe(TOPIC_SEVER_BOT_POS)\n        mqtt_client.subscribe(TOPIC_SEVER_COM)\n\n        console.log(\"subscribed to server: \" + serverList[serverIdx])\n        publish(TOPIC_SEVER_COM, client_id + \";connection_req\")\n    }\n\n}\n\nexport function onConnectionLost(response) {\n    console.log(response.errorMessage);\n}\n\nexport function publish(topic, message) {\n    var payload = new MQTT.Message(message);\n    payload.destinationName = topic;\n    mqtt_client.send(payload);\n    console.log('MQTT: published');\n}\nexport function setNewDataState(state) {\n    newData = false;\n}\n\n\n"},"lineCount":null}},"error":null,"hash":"d5362e321926e714f70409ef999bb4bb","cacheData":{"env":{}}}